{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ubs-better-admin-bundle",
  "type": "registry:item",
  "title": "Better-Admin Bundle",
  "description": "Bundle of core Better-Admin UI components and pages (login, setup, admin user form, user table, theme toggle, dashboard layout, auth context, activity tracker, database setup).",
  "registryDependencies": [
    "button",
    "input",
    "form",
    "card",
    "tabs",
    "select",
    "checkbox",
    "table",
    "dropdown-menu",
    "badge",
    "alert-dialog",
    "scroll-area",
    "alert"
  ],
  "dependencies": [
    "react-hook-form",
    "@hookform/resolvers",
    "zod",
    "@tanstack/react-table",
    "next-themes",
    "react-router-dom",
    "better-sqlite3",
    "react"
  ],
  "files": [
    {
      "path": "app/components/auth/LoginForm.tsx",
      "type": "registry:component",
      "target": "app/components/auth/LoginForm.tsx",
      "content": "import { useState } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport * as z from \"zod\";\nimport { useAuth } from \"~/contexts/AuthContext\";\nimport { Button } from \"~/components/ui/button\";\nimport { Input } from \"~/components/ui/input\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"~/components/ui/form\";\n\n// Zod schema for password login validation\nconst loginSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\n});\n\ntype LoginFormValues = z.infer<typeof loginSchema>;\n\nexport function LoginForm() {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const form = useForm<LoginFormValues>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  // Login submission\n  const onSubmit = async (data: LoginFormValues, e?: React.BaseSyntheticEvent) => {\n    e?.preventDefault();\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      await login(data.email, data.password);\n      // If we reach here without error, login was successful\n      // Navigate to dashboard (or user will be redirected to 2FA page automatically)\n      navigate(\"/dashboard\");\n    } catch (err) {\n      // Only disable loading on error\n      setIsLoading(false);\n      // Display error message for invalid credentials\n      setError(\n        err instanceof Error ? err.message : \"Invalid email or password\"\n      );\n    }\n  };\n\n\n  return (\n    <div className=\"w-full max-w-md space-y-6\">\n      {/* Display error message if login fails */}\n      {error && (\n        <div className=\"rounded-md bg-destructive/10 p-3 text-sm text-destructive\">\n          {error}\n        </div>\n      )}\n\n      {/* Login Form */}\n      <Form {...form}>\n        <form\n          onSubmit={form.handleSubmit(onSubmit)}\n          className=\"space-y-4\"\n          method=\"post\"\n          action=\"#\"\n        >\n          <FormField\n            control={form.control}\n            name=\"email\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Email</FormLabel>\n                <FormControl>\n                  <Input\n                    type=\"email\"\n                    placeholder=\"admin@example.com\"\n                    disabled={isLoading}\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"password\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Password</FormLabel>\n                <FormControl>\n                  <Input\n                    type=\"password\"\n                    placeholder=\"Enter your password\"\n                    disabled={isLoading}\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <Button\n            type=\"submit\"\n            className=\"w-full\"\n            disabled={isLoading}\n          >\n            {isLoading ? \"Signing in...\" : \"Sign in\"}\n          </Button>\n        </form>\n      </Form>\n    </div>\n  );\n}\n"
    },
    {
      "path": "app/components/auth/SetupForm.tsx",
      "type": "registry:component",
      "target": "app/components/auth/SetupForm.tsx",
      "content": "import { Form, useActionData, useNavigation } from \"react-router\";\nimport { useState } from \"react\";\nimport { Button } from \"~/components/ui/button\";\nimport { Input } from \"~/components/ui/input\";\nimport { Label } from \"~/components/ui/label\";\nimport { Alert, AlertDescription } from \"~/components/ui\";\nimport { AlertCircle, Loader2, UserPlus } from \"lucide-react\";\n\nexport function SetupForm() {\n    const actionData = useActionData<{ error?: string }>();\n    const navigation = useNavigation();\n    const isSubmitting = navigation.state === \"submitting\";\n    const [password, setPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n    const [validationError, setValidationError] = useState(\"\");\n\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n        if (password !== confirmPassword) {\n            e.preventDefault();\n            setValidationError(\"Passwords do not match\");\n            return;\n        }\n        if (password.length < 8) {\n            e.preventDefault();\n            setValidationError(\"Password must be at least 8 characters long\");\n            return;\n        }\n        setValidationError(\"\");\n    };\n\n    // Only show error if it exists and we're not currently submitting\n    const showError = !isSubmitting && (actionData?.error || validationError);\n\n    return (\n        <Form method=\"post\" className=\"space-y-6\" onSubmit={handleSubmit}>\n            {showError && (\n                <Alert variant=\"destructive\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    <AlertDescription>{actionData?.error || validationError}</AlertDescription>\n                </Alert>\n            )}\n\n            <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"name\">Full Name</Label>\n                    <Input\n                        id=\"name\"\n                        name=\"name\"\n                        type=\"text\"\n                        placeholder=\"John Doe\"\n                        required\n                        disabled={isSubmitting}\n                        minLength={2}\n                    />\n                </div>\n\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"email\">Email Address</Label>\n                    <Input\n                        id=\"email\"\n                        name=\"email\"\n                        type=\"email\"\n                        placeholder=\"admin@example.com\"\n                        required\n                        disabled={isSubmitting}\n                    />\n                </div>\n\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"password\">Password</Label>\n                    <Input\n                        id=\"password\"\n                        name=\"password\"\n                        type=\"password\"\n                        placeholder=\"••••••••\"\n                        required\n                        disabled={isSubmitting}\n                        minLength={8}\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                    />\n                    <p className=\"text-xs text-muted-foreground\">\n                        Must be at least 8 characters long\n                    </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                    <Input\n                        id=\"confirmPassword\"\n                        name=\"confirmPassword\"\n                        type=\"password\"\n                        placeholder=\"••••••••\"\n                        required\n                        disabled={isSubmitting}\n                        minLength={8}\n                        value={confirmPassword}\n                        onChange={(e) => setConfirmPassword(e.target.value)}\n                    />\n                </div>\n            </div>\n\n            <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isSubmitting}\n            >\n                {isSubmitting ? (\n                    <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Creating Admin Account...\n                    </>\n                ) : (\n                    <>\n                        <UserPlus className=\"mr-2 h-4 w-4\" />\n                        Create Admin Account\n                    </>\n                )}\n            </Button>\n        </Form>\n    );\n}\n"
    },
    {
      "path": "app/components/setup/AdminUserForm.tsx",
      "type": "registry:component",
      "target": "app/components/setup/AdminUserForm.tsx",
      "content": "import { useState } from \"react\";\nimport { Button } from \"~/components/ui/button\";\nimport { Input } from \"~/components/ui/input\";\nimport { Label } from \"~/components/ui/label\";\nimport { z } from \"zod\";\n\ninterface AdminUserFormProps {\n  onComplete: (email: string) => void;\n}\n\n// Validation schema\nconst adminUserSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  name: z.string().min(1, \"Name is required\"),\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\n  confirmPassword: z.string(),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\nexport function AdminUserForm({ onComplete }: AdminUserFormProps) {\n  const [formValues, setFormValues] = useState({\n    email: \"\",\n    name: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [submitting, setSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n\n  const handleFieldChange = (field: string, value: string) => {\n    setFormValues((prev) => ({ ...prev, [field]: value }));\n    \n    // Clear error for this field\n    if (errors[field]) {\n      setErrors((prev) => {\n        const newErrors = { ...prev };\n        delete newErrors[field];\n        return newErrors;\n      });\n    }\n    \n    setSubmitError(null);\n  };\n\n  const getPasswordStrength = (password: string): { strength: number; label: string; color: string } => {\n    if (password.length === 0) return { strength: 0, label: \"\", color: \"\" };\n    if (password.length < 8) return { strength: 25, label: \"Weak\", color: \"bg-red-500\" };\n    \n    let strength = 25;\n    if (password.length >= 12) strength += 25;\n    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 25;\n    if (/[0-9]/.test(password)) strength += 12.5;\n    if (/[^a-zA-Z0-9]/.test(password)) strength += 12.5;\n    \n    if (strength <= 25) return { strength, label: \"Weak\", color: \"bg-red-500\" };\n    if (strength <= 50) return { strength, label: \"Fair\", color: \"bg-orange-500\" };\n    if (strength <= 75) return { strength, label: \"Good\", color: \"bg-yellow-500\" };\n    return { strength, label: \"Strong\", color: \"bg-green-500\" };\n  };\n\n  const passwordStrength = getPasswordStrength(formValues.password);\n\n  const validateForm = (): boolean => {\n    try {\n      adminUserSchema.parse(formValues);\n      setErrors({});\n      return true;\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const newErrors: Record<string, string> = {};\n        error.issues.forEach((err) => {\n          const field = err.path[0];\n          newErrors[field as string] = err.message;\n        });\n        setErrors(newErrors);\n      }\n      return false;\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setSubmitting(true);\n    setSubmitError(null);\n\n    try {\n      const response = await fetch(\"/api/setup/create-admin\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: formValues.email,\n          name: formValues.name,\n          password: formValues.password,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        onComplete(formValues.email);\n      } else {\n        setSubmitError(result.error || \"Failed to create admin user\");\n      }\n    } catch (error) {\n      setSubmitError(\"An error occurred. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl font-bold mb-2 text-foreground\">Create Admin User</h2>\n        <p className=\"text-muted-foreground\">\n          Set up your administrator account to manage the application\n        </p>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Email */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"email\">\n            Email Address <span className=\"text-destructive\">*</span>\n          </Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"admin@example.com\"\n            value={formValues.email}\n            onChange={(e) => handleFieldChange(\"email\", e.target.value)}\n            aria-invalid={!!errors.email}\n          />\n          {errors.email && (\n            <p className=\"text-sm text-destructive\">{errors.email}</p>\n          )}\n        </div>\n\n        {/* Name */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"name\">\n            Full Name <span className=\"text-destructive\">*</span>\n          </Label>\n          <Input\n            id=\"name\"\n            type=\"text\"\n            placeholder=\"John Doe\"\n            value={formValues.name}\n            onChange={(e) => handleFieldChange(\"name\", e.target.value)}\n            aria-invalid={!!errors.name}\n          />\n          {errors.name && (\n            <p className=\"text-sm text-destructive\">{errors.name}</p>\n          )}\n        </div>\n\n        {/* Password */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"password\">\n            Password <span className=\"text-destructive\">*</span>\n          </Label>\n          <Input\n            id=\"password\"\n            type=\"password\"\n            placeholder=\"••••••••\"\n            value={formValues.password}\n            onChange={(e) => handleFieldChange(\"password\", e.target.value)}\n            aria-invalid={!!errors.password}\n          />\n          {errors.password && (\n            <p className=\"text-sm text-destructive\">{errors.password}</p>\n          )}\n          \n          {/* Password Strength Indicator */}\n          {formValues.password && (\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center justify-between text-xs\">\n                <span className=\"text-muted-foreground\">Password Strength:</span>\n                <span className={`font-medium ${\n                  passwordStrength.strength <= 25 ? \"text-red-600 dark:text-red-400\" :\n                  passwordStrength.strength <= 50 ? \"text-orange-600 dark:text-orange-400\" :\n                  passwordStrength.strength <= 75 ? \"text-yellow-600 dark:text-yellow-400\" :\n                  \"text-green-600 dark:text-green-400\"\n                }`}>\n                  {passwordStrength.label}\n                </span>\n              </div>\n              <div className=\"w-full bg-muted rounded-full h-1.5\">\n                <div\n                  className={`h-full rounded-full transition-all ${passwordStrength.color}`}\n                  style={{ width: `${passwordStrength.strength}%` }}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Confirm Password */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"confirmPassword\">\n            Confirm Password <span className=\"text-destructive\">*</span>\n          </Label>\n          <Input\n            id=\"confirmPassword\"\n            type=\"password\"\n            placeholder=\"••••••••\"\n            value={formValues.confirmPassword}\n            onChange={(e) => handleFieldChange(\"confirmPassword\", e.target.value)}\n            aria-invalid={!!errors.confirmPassword}\n          />\n          {errors.confirmPassword && (\n            <p className=\"text-sm text-destructive\">{errors.confirmPassword}</p>\n          )}\n        </div>\n\n        {/* Password Requirements */}\n        <div className=\"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n          <p className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2\">Password Requirements:</p>\n          <ul className=\"text-xs text-blue-700 dark:text-blue-300 space-y-1 ml-6 list-disc\">\n            <li className=\"flex items-center gap-2\">\n              <svg\n                className=\"w-3 h-3 ${formValues.password.length >= 8 ? \"text-green-600 dark:text-green-400\" : \"text-muted-foreground\"}\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n              At least 8 characters long\n            </li>\n            <li className=\"flex items-center gap-2\">\n              <svg className=\"w-3 h-3 text-muted-foreground\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n              Mix of uppercase and lowercase letters (recommended)\n            </li>\n            <li className=\"flex items-center gap-2\">\n              <svg className=\"w-3 h-3 text-muted-foreground\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n              Include numbers and special characters (recommended)\n            </li>\n          </ul>\n        </div>\n\n        {/* Submit Error */}\n        {submitError && (\n          <div className=\"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n            <p className=\"text-sm text-red-700 dark:text-red-300\">{submitError}</p>\n          </div>\n        )}\n\n        {/* Submit Button */}\n        <Button\n          type=\"submit\"\n          disabled={submitting}\n          size=\"lg\"\n          className=\"w-full\"\n        >\n          {submitting ? (\n            <>\n              <svg\n                className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle\n                  className=\"opacity-25\"\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"4\"\n                />\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                />\n              </svg>\n              Creating Admin User...\n            </>\n          ) : (\n            \"Create Admin User\"\n          )}\n        </Button>\n      </form>\n    </div>\n  );\n}\n"
    },
    {
      "path": "app/components/users/UserTable.tsx",
      "type": "registry:component",
      "target": "app/components/users/UserTable.tsx",
      "content": "import { Button } from \"~/components/ui/button\";\nimport { Checkbox } from \"~/components/ui/checkbox\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"~/components/ui/table\";\nimport { Skeleton } from \"~/components/ui/skeleton\";\nimport type { User } from \"~/types\";\n\ninterface UserTableProps {\n  users: User[];\n  onEdit: (user: User) => void;\n  onDelete: (user: User) => void;\n  onBan: (user: User) => void;\n  onUnban: (user: User) => void;\n  isLoading: boolean;\n  isAdmin?: boolean;\n  selectable?: boolean;\n  selectedUserIds?: string[];\n  onSelectChange?: (user: User, selected: boolean) => void;\n  onSelectAllChange?: (selected: boolean) => void;\n}\n\nfunction TableSkeleton({ selectable }: { selectable: boolean }) {\n  return (\n    <>\n      {[...Array(5)].map((_, i) => (\n        <TableRow key={i}>\n          {selectable && (\n            <TableCell>\n              <Skeleton className=\"h-4 w-4\" />\n            </TableCell>\n          )}\n          <TableCell>\n            <Skeleton className=\"h-4 w-[200px]\" />\n          </TableCell>\n          <TableCell>\n            <Skeleton className=\"h-4 w-[150px]\" />\n          </TableCell>\n          <TableCell>\n            <Skeleton className=\"h-4 w-[120px]\" />\n          </TableCell>\n          <TableCell>\n            <Skeleton className=\"h-4 w-[80px]\" />\n          </TableCell>\n          <TableCell>\n            <Skeleton className=\"h-4 w-[80px]\" />\n          </TableCell>\n          <TableCell>\n            <div className=\"flex gap-2\">\n              <Skeleton className=\"h-8 w-16\" />\n              <Skeleton className=\"h-8 w-16\" />\n            </div>\n          </TableCell>\n        </TableRow>\n      ))}\n    </>\n  );\n}\n\nfunction EmptyState({ selectable }: { selectable: boolean }) {\n  return (\n    <TableRow>\n      <TableCell colSpan={selectable ? 7 : 6} className=\"h-24 text-center\">\n        <div className=\"flex flex-col items-center justify-center gap-2\">\n          <p className=\"text-muted-foreground\">No users found</p>\n          <p className=\"text-sm text-muted-foreground\">\n            Get started by creating a new user\n          </p>\n        </div>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport function UserTable({\n  users,\n  onEdit,\n  onDelete,\n  onBan,\n  onUnban,\n  isLoading,\n  isAdmin = true,\n  selectable = false,\n  selectedUserIds = [],\n  onSelectChange,\n  onSelectAllChange,\n}: UserTableProps) {\n  const formatDate = (date: Date) => {\n    return new Date(date).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  };\n\n  const getStatusBadge = (user: User) => {\n    if (user.banned) {\n      return (\n        <span className=\"inline-flex items-center rounded-full bg-destructive/10 px-2.5 py-0.5 text-xs font-medium text-destructive\">\n          Banned\n        </span>\n      );\n    }\n    if (user.emailVerified) {\n      return (\n        <span className=\"inline-flex items-center rounded-full bg-green-500/10 px-2.5 py-0.5 text-xs font-medium text-green-700 dark:text-green-400\">\n          Active\n        </span>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center rounded-full bg-yellow-500/10 px-2.5 py-0.5 text-xs font-medium text-yellow-700 dark:text-yellow-400\">\n        Pending\n      </span>\n    );\n  };\n\n  const getRoleBadge = (role: string) => {\n    if (role === \"admin\") {\n      return (\n        <span className=\"inline-flex items-center rounded-full bg-primary/10 px-2.5 py-0.5 text-xs font-medium text-primary\">\n          Admin\n        </span>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-secondary-foreground\">\n        User\n      </span>\n    );\n  };\n\n  const allSelected = selectable && users.length > 0 && users.every((user) => selectedUserIds.includes(user.id));\n  const someSelected =\n    selectable &&\n    users.some((user) => selectedUserIds.includes(user.id)) &&\n    !allSelected;\n\n  return (\n    <div className=\"rounded-md border\">\n      <Table>\n        <TableHeader>\n          <TableRow>\n            {selectable && (\n              <TableHead className=\"w-[48px]\">\n                <Checkbox\n                  aria-label=\"Select all users\"\n                  checked={allSelected ? true : someSelected ? \"indeterminate\" : false}\n                  onCheckedChange={(checked) => onSelectAllChange?.(checked === true)}\n                  disabled={users.length === 0}\n                />\n              </TableHead>\n            )}\n            <TableHead>Email</TableHead>\n            <TableHead>Name</TableHead>\n            <TableHead>Registration Date</TableHead>\n            <TableHead>Status</TableHead>\n            <TableHead>Role</TableHead>\n            <TableHead className=\"text-right\">Actions</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {isLoading ? (\n            <TableSkeleton selectable={selectable} />\n          ) : users.length === 0 ? (\n            <EmptyState selectable={selectable} />\n          ) : (\n            users.map((user) => (\n              <TableRow key={user.id}>\n                {selectable && (\n                  <TableCell>\n                    <Checkbox\n                      aria-label={`Select ${user.email}`}\n                      checked={selectedUserIds.includes(user.id)}\n                      onCheckedChange={(checked) =>\n                        onSelectChange?.(user, checked === true)\n                      }\n                    />\n                  </TableCell>\n                )}\n                <TableCell className=\"font-medium\">{user.email}</TableCell>\n                <TableCell>{user.name}</TableCell>\n                <TableCell>{formatDate(user.createdAt)}</TableCell>\n                <TableCell>{getStatusBadge(user)}</TableCell>\n                <TableCell>{getRoleBadge(user.role)}</TableCell>\n                <TableCell className=\"text-right\">\n                  <div className=\"flex justify-end gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => onEdit(user)}\n                      disabled={!isAdmin}\n                    >\n                      Edit\n                    </Button>\n                    {user.banned ? (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onUnban(user)}\n                        className=\"text-green-600 hover:text-green-700\"\n                        disabled={!isAdmin}\n                      >\n                        Unban\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onBan(user)}\n                        className=\"text-orange-600 hover:text-orange-700\"\n                        disabled={!isAdmin}\n                      >\n                        Ban\n                      </Button>\n                    )}\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => onDelete(user)}\n                      disabled={!isAdmin}\n                    >\n                      Delete\n                    </Button>\n                  </div>\n                </TableCell>\n              </TableRow>\n            ))\n          )}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n"
    },
    {
      "path": "app/components/ui/theme-toggle.tsx",
      "type": "registry:component",
      "target": "app/components/ui/theme-toggle.tsx",
      "content": "import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"~/components/ui/button\";\nimport { useTheme } from \"~/contexts/ThemeContext\";\n\nexport function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      aria-label=\"Toggle theme\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"h-5 w-5\" />\n      ) : (\n        <Sun className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n"
    },
    {
      "path": "app/contexts/AuthContext.tsx",
      "type": "registry:hook",
      "target": "app/contexts/AuthContext.tsx",
      "content": "import { createContext, useContext, useEffect, useState } from \"react\";\nimport { authClient } from \"~/lib/auth.client\";\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  role: \"user\" | \"admin\";\n  emailVerified: boolean;\n  banned?: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  isAdmin: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\n// Default context value to prevent errors during SSR/hydration\nconst defaultAuthContext: AuthContextType = {\n  user: null,\n  isLoading: true,\n  isAdmin: false,\n  login: async () => {\n    throw new Error(\"AuthProvider not initialized\");\n  },\n  logout: async () => {\n    throw new Error(\"AuthProvider not initialized\");\n  },\n};\n\nconst AuthContext = createContext<AuthContextType>(defaultAuthContext);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Mark as mounted on client side to prevent SSR/hydration issues\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Fetch session on mount (only on client)\n  useEffect(() => {\n    if (!isMounted) return;\n\n    const fetchSession = async () => {\n      try {\n        const { data: session } = await authClient.getSession();\n        if (session?.user) {\n          setUser(session.user as User);\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error(\"Error fetching session:\", error);\n        setUser(null);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchSession();\n  }, [isMounted]);\n\n  const isAdmin = user?.role === \"admin\";\n\n  const login = async (email: string, password: string) => {\n    const result = await authClient.signIn.email({\n      email,\n      password,\n      callbackURL: \"/dashboard\",\n    });\n\n    if (result.error) {\n      throw new Error(result.error.message || \"Login failed\");\n    }\n\n    // If 2FA is required, the onTwoFactorRedirect callback will handle the redirect\n    // and this code won't execute further\n    \n    // If we reach here, no 2FA is required - fetch session\n    const { data: session } = await authClient.getSession();\n    if (session?.user) {\n      const userData = session.user as User;\n      \n      // Check if user is banned\n      if (userData.banned) {\n        // Sign out the banned user\n        await authClient.signOut();\n        throw new Error(\"Your account has been banned. Please contact support for assistance.\");\n      }\n      \n      setUser(userData);\n    }\n  };\n\n  const logout = async () => {\n    setIsLoading(true);\n    try {\n      await authClient.signOut();\n      setUser(null);\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const value: AuthContextType = {\n    user,\n    isLoading,\n    isAdmin,\n    login,\n    logout,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  // Context is always defined now (has default value), but we can still check if it's the default\n  // This prevents errors during SSR/hydration when components might render before AuthProvider is ready\n  return context;\n}\n"
    },
    {
      "path": "app/contexts/ActivityContext.tsx",
      "type": "registry:hook",
      "target": "app/contexts/ActivityContext.tsx",
      "content": "import { createContext, useContext, useState, useEffect, useCallback } from \"react\";\n\nexport interface Activity {\n  id: string;\n  action: string;\n  user: string;\n  target?: string;\n  timestamp: Date;\n  type: \"create\" | \"delete\" | \"ban\" | \"unban\" | \"edit\" | \"role\";\n  metadata?: any;\n}\n\ninterface ActivityContextType {\n  activities: Activity[];\n  logActivity: (activity: Omit<Activity, \"id\" | \"timestamp\">) => Promise<void>;\n  refreshActivities: () => Promise<void>;\n  isLoading: boolean;\n}\n\nconst ActivityContext = createContext<ActivityContextType | undefined>(undefined);\n\nexport function ActivityProvider({ children }: { children: React.ReactNode }) {\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Fetch activities from database\n  const refreshActivities = useCallback(async () => {\n    // Skip fetching if we're on the setup route\n    if (window.location.pathname === \"/setup\" || window.location.pathname.startsWith(\"/setup/\")) {\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const response = await fetch(\"/api/activity?limit=50\");\n      \n      // Check if response is actually JSON (not HTML error page)\n      const contentType = response.headers.get(\"content-type\");\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        // Response is not JSON (likely HTML error page), skip\n        setIsLoading(false);\n        return;\n      }\n\n      if (response.ok) {\n        const data = await response.json();\n        setActivities(\n          data.activities.map((a: any) => ({\n            ...a,\n            timestamp: new Date(a.timestamp),\n          }))\n        );\n      } else {\n        // Fallback to localStorage if API is not available yet\n        console.warn(\"Activity API not available, using localStorage fallback\");\n        const stored = localStorage.getItem(\"admin_activities\");\n        if (stored) {\n          const parsed = JSON.parse(stored);\n          setActivities(\n            parsed.map((a: any) => ({\n              ...a,\n              timestamp: new Date(a.timestamp),\n            }))\n          );\n        }\n      }\n    } catch (error) {\n      // Silently handle errors during setup or when API is unavailable\n      if (error instanceof SyntaxError && error.message.includes(\"JSON\")) {\n        // HTML response instead of JSON - likely during setup or auth redirect\n        console.warn(\"Activity API returned non-JSON response, skipping\");\n      } else {\n        console.error(\"Failed to fetch activities:\", error);\n      }\n      \n      // Fallback to localStorage on error\n      try {\n        const stored = localStorage.getItem(\"admin_activities\");\n        if (stored) {\n          const parsed = JSON.parse(stored);\n          setActivities(\n            parsed.map((a: any) => ({\n              ...a,\n              timestamp: new Date(a.timestamp),\n            }))\n          );\n        }\n      } catch (e) {\n        // Silently ignore localStorage errors\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Log activity to database\n  const logActivity = async (activity: Omit<Activity, \"id\" | \"timestamp\">) => {\n    const newActivity: Activity = {\n      ...activity,\n      id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date(),\n    };\n\n    try {\n      const response = await fetch(\"/api/activity\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(activity),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const dbActivity: Activity = {\n          ...data.activity,\n          timestamp: new Date(data.activity.timestamp),\n        };\n        \n        // Update the UI with database response\n        setActivities((prev) => [dbActivity, ...prev]);\n      } else {\n        // Fallback to localStorage if API is not available\n        console.warn(\"Activity API not available, using localStorage fallback\");\n        setActivities((prev) => [newActivity, ...prev]);\n        \n        // Store in localStorage\n        const stored = localStorage.getItem(\"admin_activities\");\n        const existing = stored ? JSON.parse(stored) : [];\n        const updated = [newActivity, ...existing].slice(0, 50);\n        localStorage.setItem(\"admin_activities\", JSON.stringify(updated));\n      }\n    } catch (error) {\n      console.error(\"Failed to log activity:\", error);\n      // Fallback to localStorage on error\n      setActivities((prev) => [newActivity, ...prev]);\n      \n      try {\n        const stored = localStorage.getItem(\"admin_activities\");\n        const existing = stored ? JSON.parse(stored) : [];\n        const updated = [newActivity, ...existing].slice(0, 50);\n        localStorage.setItem(\"admin_activities\", JSON.stringify(updated));\n      } catch (e) {\n        console.error(\"Failed to save to localStorage:\", e);\n      }\n    }\n  };\n\n  // Load activities from database on mount\n  useEffect(() => {\n    refreshActivities();\n  }, [refreshActivities]);\n\n  // Refresh activities every 30 seconds to stay in sync (only if not on setup page)\n  useEffect(() => {\n    // Don't set up interval on setup page\n    if (window.location.pathname === \"/setup\" || window.location.pathname.startsWith(\"/setup/\")) {\n      return;\n    }\n\n    const interval = setInterval(() => {\n      // Check again before refreshing\n      if (window.location.pathname !== \"/setup\" && !window.location.pathname.startsWith(\"/setup/\")) {\n        refreshActivities();\n      }\n    }, 30000); // 30 seconds\n\n    return () => clearInterval(interval);\n  }, [refreshActivities]);\n\n  const value: ActivityContextType = {\n    activities,\n    logActivity,\n    refreshActivities,\n    isLoading,\n  };\n\n  return (\n    <ActivityContext.Provider value={value}>{children}</ActivityContext.Provider>\n  );\n}\n\nexport function useActivity() {\n  const context = useContext(ActivityContext);\n  if (context === undefined) {\n    throw new Error(\"useActivity must be used within an ActivityProvider\");\n  }\n  return context;\n}\n"
    },
    {
      "path": "app/routes/setup.database.tsx",
      "type": "registry:page",
      "target": "app/routes/setup.database.tsx",
      "content": "import { useState } from \"react\";\nimport { redirect } from \"react-router\";\nimport type { Route } from \"./+types/setup.database\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"~/components/ui/card\";\nimport { Button } from \"~/components/ui/button\";\nimport { Input } from \"~/components/ui/input\";\nimport { Label } from \"~/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"~/components/ui/select\";\nimport { Alert, AlertDescription } from \"~/components/ui/alert\";\nimport { ThemeToggle } from \"~/components/ui/theme-toggle\";\nimport { AlertCircle, Database, CheckCircle2 } from \"lucide-react\";\nimport { existsSync, writeFileSync, readFileSync } from \"fs\";\nimport { join } from \"path\";\n\nexport function meta() {\n  return [\n    { title: \"Database Setup - Better-Admin\" },\n    { name: \"description\", content: \"Configure your database connection\" },\n  ];\n}\n\nexport async function loader() {\n  // Check if .env file exists and has DATABASE_URL configured\n  const envPath = join(process.cwd(), \".env\");\n  const hasEnv = existsSync(envPath);\n  \n  if (hasEnv) {\n    const envContent = readFileSync(envPath, \"utf-8\");\n    if (envContent.includes(\"DATABASE_URL\") && envContent.includes(\"DATABASE_TYPE\")) {\n      // Database already configured, redirect to setup\n      throw redirect(\"/setup\");\n    }\n  }\n\n  return { hasEnv };\n}\n\nexport async function action({ request }: Route.ActionArgs) {\n  const formData = await request.formData();\n  const dbType = formData.get(\"dbType\") as string;\n  const connectionString = formData.get(\"connectionString\") as string;\n\n  try {\n    // Validate connection string based on database type\n    if (!connectionString) {\n      return { error: \"Connection string is required\" };\n    }\n\n    // Create or update .env file\n    const envPath = join(process.cwd(), \".env\");\n    let envContent = \"\";\n\n    if (existsSync(envPath)) {\n      envContent = readFileSync(envPath, \"utf-8\");\n    }\n\n    // Update or add DATABASE_URL and DATABASE_TYPE\n    const lines = envContent.split(\"\n\");\n    const updatedLines = lines.filter(\n      (line) => !line.startsWith(\"DATABASE_URL=\") && !line.startsWith(\"DATABASE_TYPE=\")\n    );\n\n    updatedLines.push(`DATABASE_URL=\"${connectionString}\"`);\n    updatedLines.push(`DATABASE_TYPE=\"${dbType}\"`);\n\n    writeFileSync(envPath, updatedLines.join(\"\n\"));\n\n    // Test connection based on database type\n    if (dbType === \"sqlite\") {\n      const Database = (await import(\"better-sqlite3\")).default;\n      const db = new Database(connectionString);\n      db.close();\n    } else if (dbType === \"postgresql\") {\n      const { Pool } = await import(\"pg\");\n      const pool = new Pool({ connectionString });\n      await pool.query(\"SELECT 1\");\n      await pool.end();\n    } else if (dbType === \"mysql\") {\n      const { createPool } = await import(\"mysql2/promise\");\n      const pool = createPool(connectionString);\n      await pool.query(\"SELECT 1\");\n      await pool.end();\n    }\n\n    return redirect(\"/setup\");\n  } catch (error) {\n    console.error(\"Database connection error:\", error);\n    return {\n      error: error instanceof Error ? error.message : \"Failed to connect to database\",\n    };\n  }\n}\n\nexport default function DatabaseSetup() {\n  const [dbType, setDbType] = useState<string>(\"sqlite\");\n  const [connectionString, setConnectionString] = useState<string>(\"./data/auth.db\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const getPlaceholder = () => {\n    switch (dbType) {\n      case \"postgresql\":\n        return \"postgresql://user:password@localhost:5432/database\";\n      case \"mysql\":\n        return \"mysql://user:password@localhost:3306/database\";\n      case \"sqlite\":\n      default:\n        return \"./data/auth.db\";\n    }\n  };\n\n  const getDescription = () => {\n    switch (dbType) {\n      case \"postgresql\":\n        return \"Enter your PostgreSQL connection string. Format: postgresql://user:password@host:port/database\";\n      case \"mysql\":\n        return \"Enter your MySQL connection string. Format: mysql://user:password@host:port/database\";\n      case \"sqlite\":\n      default:\n        return \"Enter the path to your SQLite database file. It will be created if it doesn't exist.\";\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background relative p-4\">\n      <div className=\"absolute top-4 right-4\">\n        <ThemeToggle />\n      </div>\n\n      <Card className=\"w-full max-w-2xl\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Database className=\"h-6 w-6\" />\n            <CardTitle>Database Configuration</CardTitle>\n          </div>\n          <CardDescription>\n            Configure your database connection before creating your admin account\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent className=\"space-y-6\">\n          <Alert>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              This is a one-time setup. Choose your database type and provide the connection details.\n            </AlertDescription>\n          </Alert>\n\n          <form method=\"post\" className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"dbType\">Database Type</Label>\n              <Select\n                name=\"dbType\"\n                value={dbType}\n                onValueChange={(value) => {\n                  setDbType(value);\n                  // Set default connection string for each type\n                  if (value === \"sqlite\") setConnectionString(\"./data/auth.db\");\n                  else if (value === \"postgresql\") setConnectionString(\"\");\n                  else if (value === \"mysql\") setConnectionString(\"\");\n                }}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select database type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"sqlite\">SQLite (Recommended for development)</SelectItem>\n                  <SelectItem value=\"postgresql\">PostgreSQL</SelectItem>\n                  <SelectItem value=\"mysql\">MySQL</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"connectionString\">Connection String</Label>\n              <Input\n                id=\"connectionString\"\n                name=\"connectionString\"\n                type=\"text\"\n                value={connectionString}\n                onChange={(e) => setConnectionString(e.target.value)}\n                placeholder={getPlaceholder()}\n                required\n                disabled={isSubmitting}\n              />\n              <p className=\"text-xs text-muted-foreground\">{getDescription()}</p>\n            </div>\n\n            <div className=\"rounded-lg bg-muted p-4 space-y-3\">\n              <h3 className=\"text-sm font-semibold flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4\" />\n                What happens next?\n              </h3>\n              <ul className=\"text-xs text-muted-foreground space-y-1 ml-6 list-disc\">\n                <li>Your database connection will be saved to .env file</li>\n                <li>The connection will be tested to ensure it works</li>\n                <li>Database tables will be created automatically</li>\n                <li>You'll be redirected to create your first admin account</li>\n              </ul>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <Button\n                type=\"submit\"\n                className=\"flex-1\"\n                disabled={isSubmitting || !connectionString}\n              >\n                {isSubmitting ? \"Testing Connection...\" : \"Continue to Admin Setup\"}\n              </Button>\n            </div>\n          </form>\n\n          <div className=\"border-t pt-6\">\n            <h3 className=\"text-sm font-semibold mb-3\">Database Requirements</h3>\n            <div className=\"grid gap-3 text-xs\">\n              <div className=\"flex items-start gap-2\">\n                <div className=\"font-mono bg-muted px-2 py-1 rounded\">SQLite</div>\n                <div className=\"text-muted-foreground\">\n                  No installation required. Perfect for development and small deployments.\n                </div>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <div className=\"font-mono bg-muted px-2 py-1 rounded\">PostgreSQL</div>\n                <div className=\"text-muted-foreground\">\n                  Requires PostgreSQL 12+ and the 'pg' npm package.\n                </div>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <div className=\"font-mono bg-muted px-2 py-1 rounded\">MySQL</div>\n                <div className=\"text-muted-foreground\">\n                  Requires MySQL 8+ and the 'mysql2' npm package.\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"
    },
    {
      "path": "app/routes/dashboard.tsx",
      "type": "registry:page",
      "target": "app/routes/dashboard.tsx",
      "content": "import { Outlet, redirect, Link, Form, useLocation } from \"react-router\";\nimport type { Route } from \"./+types/dashboard\";\nimport { auth } from \"~/lib/auth.server\";\nimport { requireAuth } from \"~/lib/auth.middleware\";\nimport { requireSetupComplete } from \"~/middleware/setup-check.server\";\nimport { Button } from \"~/components/ui/button\";\nimport { ThemeToggle } from \"~/components/ui/theme-toggle\";\nimport { cn } from \"~/lib/utils\";\n\nexport function meta({}: Route.MetaArgs) {\n  return [\n    { title: \"Dashboard - Better-Admin\" },\n    { name: \"description\", content: \"User management dashboard\" },\n  ];\n}\n\nexport async function loader({ request }: Route.LoaderArgs) {\n  // Check if setup is complete first\n  await requireSetupComplete(request);\n  \n  // Use authentication middleware to check for authenticated admin user\n  const user = await requireAuth(request);\n\n  // Return user data to be available in the route context\n  return { user };\n}\n\nexport async function action({ request }: Route.ActionArgs) {\n  const formData = await request.formData();\n  const intent = formData.get(\"intent\");\n\n  if (intent === \"logout\") {\n    // Sign out using Better Auth\n    await auth.api.signOut({\n      headers: request.headers,\n    });\n    throw redirect(\"/\");\n  }\n\n  return null;\n}\n\ninterface DashboardLoaderData {\n  user: {\n    id: string;\n    email: string;\n    name: string;\n    role: string;\n    emailVerified: boolean;\n    createdAt: Date;\n    updatedAt: Date;\n  };\n}\n\nexport default function Dashboard({ loaderData }: Route.ComponentProps) {\n  const data = loaderData as unknown as DashboardLoaderData;\n  const location = useLocation();\n\n  const isActive = (path: string) => {\n    if (path === \"/dashboard\") {\n      return location.pathname === \"/dashboard\";\n    }\n    return location.pathname.startsWith(path);\n  };\n\n  return (\n    <div className=\"h-screen bg-background flex flex-col overflow-hidden\">\n      {/* Navigation Header */}\n      <nav className=\"bg-card shadow-sm border-b flex-shrink-0\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex justify-between items-center h-16\">\n            {/* Logo and Title */}\n            <div className=\"flex items-center space-x-8\">\n              <Link to=\"/dashboard\" className=\"text-xl font-bold text-foreground\">\n                Better-Admin\n              </Link>\n              \n              {/* Navigation Links */}\n              <div className=\"hidden md:flex space-x-4\">\n                <Link\n                  to=\"/dashboard\"\n                  className={cn(\n                    \"px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                    isActive(\"/dashboard\")\n                      ? \"bg-accent text-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-accent\"\n                  )}\n                >\n                  Dashboard\n                </Link>\n                <Link\n                  to=\"/dashboard/users\"\n                  className={cn(\n                    \"px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                    isActive(\"/dashboard/users\")\n                      ? \"bg-accent text-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-accent\"\n                  )}\n                >\n                  Users\n                </Link>\n                <Link\n                  to=\"/dashboard/sessions\"\n                  className={cn(\n                    \"px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                    isActive(\"/dashboard/sessions\")\n                      ? \"bg-accent text-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-accent\"\n                  )}\n                >\n                  Sessions\n                </Link>\n                <Link\n                  to=\"/dashboard/activity\"\n                  className={cn(\n                    \"px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                    isActive(\"/dashboard/activity\")\n                      ? \"bg-accent text-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-accent\"\n                  )}\n                >\n                  Activity\n                </Link>\n                <Link\n                  to=\"/dashboard/profile\"\n                  className={cn(\n                    \"px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                    isActive(\"/dashboard/profile\")\n                      ? \"bg-accent text-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-accent\"\n                  )}\n                >\n                  Profile\n                </Link>\n              </div>\n            </div>\n\n            {/* User Info and Logout */}\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-sm text-foreground\">\n                <span className=\"font-medium\">{data.user.name}</span>\n                <span className=\"text-muted-foreground ml-2\">({data.user.email})</span>\n              </div>\n              <ThemeToggle />\n              <Form method=\"post\">\n                <input type=\"hidden\" name=\"intent\" value=\"logout\" />\n                <Button type=\"submit\" variant=\"default\" size=\"default\">\n                  Logout\n                </Button>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"container mx-auto px-4 py-8 h-full\">\n          <Outlet context={{ user: data.user }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
    }
  ]
}